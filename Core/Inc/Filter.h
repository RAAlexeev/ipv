/*
 * Filter.h
 *
 *  Created on: 27 рту. 2020 у.
 *      Author: alekseev
 */

#ifndef INC_FILTER_H_
#define INC_FILTER_H_


#include "main.h"
#include "arm_math.h"

 static const struct{
//a0=   1,000000000000000000
	 float32_t a1=   -1.995024191951463520;
	 float32_t a2=   0.995031465731937348;
	 float32_t b0=   -0.289066428374301243;
	 float32_t b1=   0.000000000000000000;
	 float32_t b2=   0.289066428374301243;
 }Sect0;

static const struct{
//a0   1,000000000000000000
float32_t a1=   -1.284216608121434120;
float32_t a2=   0.426735156807720950;
float32_t b0=   -0.123970760612496247;
float32_t b1=   0.000000000000000000;
float32_t b2=   0.123970760612496247;
}Sect1;
static const struct{
//a0   1,000000000000000000
	float32_t a1=   -1.997965334717538790;
	float32_t a2=   0.997972499892860077;
	float32_t b0=   -0.245300228527055963;
	float32_t b1=   0.000000000000000000;
	float32_t b2=   0.245300228527055963;
}Sect2;

static const struct{
	//float32_t a0=   1,000000000000000000
	float32_t a1=   -1.540808005051441890;
	float32_t a2=   0.714810826497584761;
	float32_t b0=   -0.175699489827921856;
	float32_t b1=   0.000000000000000000;
	float32_t b2=   0.175699489827921856;
}Sect3;

/*
static const struct {
 float32_t const b0 = 1;
 float32_t const b1 = 1.17208778858184814453125;//1.1720877471195239
 float32_t const b2 = 1;
 float32_t const a1 = -1.996154308319091796875;//-1.9961542493973554
 float32_t const a2 = 0.996168315410614013671875;//0.99616829785517969
 }Sect0;
//*
 static const struct {
 float32_t const b0 = 1;
 float32_t const b1 = -1.99999988079071044921875;//-1.999999840748488
 float32_t const b2 = 1;
 float32_t const a1 = -1.522842884063720703125;//-1.5228429402520176
 float32_t const a2 = 0.66085374355316162109375;//0.66085375658373646
 }Sect1;
//*/
/*
static const struct {
//float32_t a0= 1.000000000000000000;
	float32_t a1=-1.995393198893945510;
	float32_t a2= 0.995399591180589294;
	float32_t b0= 0.574223176720992434;
	float32_t b1=-1.148445829457760640;
	float32_t b2= 0.574223176720992434;
}Sect0;

static const struct{
//	float32_t a0=   1.000000000000000000;
	float32_t a1=-1.249042245854014470;
	float32_t a2= 0.408019667250968832;
	float32_t b0= 0.235377180751711823;
	float32_t b1=-0.192233011265162568;
	float32_t b2= 0.235377180751711823;
}Sect1;

static const struct{
	//float32_t a0= 1.000000000000000000;
	float32_t a1=-1.998114899831731520;
	float32_t a2= 0.998121953065961964;
	float32_t b0= 0.291652087799459059;
	float32_t b1=-0.583304129881506594;
	float32_t b2= 0.291652087799459059;
}Sect2;

static const struct{
//float32_t a0= 1.000000000000000000;
	float32_t a1=-1.551399100852358660;
	float32_t a2= 0.729552266449785103;
	float32_t b0= 0.213175795818655422;
	float32_t b1= 0.178871114171713808;
	float32_t b2= 0.213175795818655422;
}Sect3;
*/
/*
static const struct{
//a0   1.000000000000000000
	float32_t a1=-1.994314538863629190;
	float32_t a2= 0.994326037342766478;
	float32_t b0= 0.440064446754909133;
	float32_t b1=-0.880128347818882051;
	float32_t b2= 0.440064446754909133;
}Sect0;
/*
static const struct{
//a0   1,000000000000000000
	float32_t a1= 1.444249760000790420;
	float32_t a2= 0.543577563782902340;
	float32_t b0= 0.240574168724140058;
	float32_t b1=-0.253909823885138108;
	float32_t b2= 0.240574168724140058;
}Sect1;

static const struct{
//a0= 1,000000000000000000
	float32_t a1=-1.998636020114621160;
	float32_t a2= 0.998643603705283822;
	float32_t b0= 0.289537569274343987;
	float32_t b1=-0.579075074265251954;
	float32_t b2= 0.289537569274343987;
}Sect2;

static const struct{
//a0   1,000000000000000000
	float32_t a1= -1.635272924379422400;
	float32_t a2=  0.809274276788516156;
	float32_t b0=  0.234633563073168128;
	float32_t b1=  0.125055458109250728;
	float32_t b2=  0.234633563073168128;
}Sect3;
/*/
class Filter {
static const uint8_t N = 4;

 static float32_t const coaf[5*N] __attribute__((section(".ccmram")));
 	 	float32_t state[N*4];
 	 	arm_biquad_casd_df1_inst_f32   S;
public:
	Filter();
	virtual ~Filter();
		void exec(float32_t  *pSrc, float32_t *pDst,  uint32_t  blockSize)const;
};



#endif /* INC_FILTER_H_ */
